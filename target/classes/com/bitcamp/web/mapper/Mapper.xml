<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bitcamp.web.mapper.Mapper">
  <insert id="insertMember" parameterType="com.bitcamp.web.domain.Command">
    INSERT INTO Member VALUES (#{member.id}, #{member.pass}, #{member.name},
    <choose>
        <when test="member.ssn == null">
            ''
        </when>
        <otherwise>
            #{member.ssn}
        </otherwise>
    </choose>,
    <choose>
        <when test="member.phone == null">
            ''
        </when>
        <otherwise>
            #{member.phone}
        </otherwise>
    </choose>,
    <choose>
        <when test="member.email == null">
            ''
        </when>
        <otherwise>
            #{member.email}
        </otherwise>
    </choose>,
    <choose>
        <when test="member.profile == null">
            ''
        </when>
        <otherwise>
            #{member.profile}
        </otherwise>
    </choose>,
    <choose>
        <when test="member.addr == null">
            ''
        </when>
        <otherwise>
            #{member.addr}
        </otherwise>
    </choose>)
  </insert>
  <select id="selectById" resultType="com.bitcamp.web.domain.Member" parameterType="com.bitcamp.web.domain.Command">
    SELECT * FROM Member WHERE id LIKE #{data1}
  </select>
  <delete id="deleteMember" parameterType="com.bitcamp.web.domain.Command">
  </delete>
  <select id="exist" resultType="int" parameterType="com.bitcamp.web.domain.Command">
    SELECT COUNT(*) FROM MEMBER WHERE id LIKE #{data1} AND pass LIKE #{data2}
  </select>
  <select id="articles" resultType="com.bitcamp.web.domain.Board" parameterType="com.bitcamp.web.domain.Command">
  	SELECT b.bbs_seq AS bbsSeq, b.title, b.content, b.regdate, b.id 
  		FROM (SELECT @num:=@num+1 as num, bbs_seq, title, content, regdate, id 
  			FROM (select @num:=0) tmp, board order by bbs_seq desc) b 
  		WHERE b.num BETWEEN #{data1}+1 AND #{data2}+1;
  </select>
  <select id="boardAll" parameterType="com.bitcamp.web.domain.Command" resultType="int">
  	SELECT COUNT(*) FROM Board
  </select>
</mapper>